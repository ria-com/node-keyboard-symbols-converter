"use strict";

(function () {
    var symbolsRelations = {
        'en-US': {
            'ru-RU': {
                '`': 'ё',
                '~': 'Ё',
                'q': 'й',
                'w': 'ц',
                'e': 'у',
                'r': 'к',
                't': 'е',
                'y': 'н',
                'u': 'г',
                'i': 'ш',
                'o': 'щ',
                'p': 'з',
                '[': 'х',
                ']': 'ъ',
                'a': 'ф',
                's': 'ы',
                'd': 'в',
                'f': 'а',
                'g': 'п',
                'h': 'р',
                'j': 'о',
                'k': 'л',
                'l': 'д',
                ';': 'ж',
                '\'': 'э',
                'z': 'я',
                'x': 'ч',
                'c': 'с',
                'v': 'м',
                'b': 'и',
                'n': 'т',
                'm': 'ь',
                ',': 'б',
                '.': 'ю',
                '/': '.',
                'Q': 'Й',
                'W': 'Ц',
                'E': 'У',
                'R': 'К',
                'T': 'Е',
                'Y': 'Н',
                'U': 'Г',
                'I': 'Ш',
                'O': 'Щ',
                'P': 'З',
                'A': 'Ф',
                'S': 'Ы',
                'D': 'В',
                'F': 'А',
                'G': 'П',
                'H': 'Р',
                'J': 'О',
                'K': 'Л',
                'L': 'Д',
                'Z': 'Я',
                'X': 'Ч',
                'C': 'С',
                'V': 'М',
                'B': 'И',
                'N': 'Т',
                'M': 'Ь',
                '{': 'Х',
                '}': 'Ъ',
                ':': 'Ж',
                '"': 'Э',
                '<': 'Б',
                '>': 'Ю',
                '?': ','
            },
            'ua-UA': {
                '`': '’',
                '~': '\'',
                'q': 'й',
                'w': 'ц',
                'e': 'у',
                'r': 'к',
                't': 'е',
                'y': 'н',
                'u': 'г',
                'i': 'ш',
                'o': 'щ',
                'p': 'з',
                '[': 'х',
                ']': 'ї',
                'a': 'ф',
                's': 'і',
                'd': 'в',
                'f': 'а',
                'g': 'п',
                'h': 'р',
                'j': 'о',
                'k': 'л',
                'l': 'д',
                ';': 'ж',
                '\'': 'є',
                'z': 'я',
                'x': 'ч',
                'c': 'с',
                'v': 'м',
                'b': 'и',
                'n': 'т',
                'm': 'ь',
                ',': 'б',
                '.': 'ю',
                '/': '.',
                'Q': 'Й',
                'W': 'Ц',
                'E': 'У',
                'R': 'К',
                'T': 'Е',
                'Y': 'Н',
                'U': 'Г',
                'I': 'Ш',
                'O': 'Щ',
                'P': 'З',
                'A': 'Ф',
                'S': 'Ы',
                'D': 'В',
                'F': 'А',
                'G': 'П',
                'H': 'Р',
                'J': 'О',
                'K': 'Л',
                'L': 'Д',
                'Z': 'Я',
                'X': 'Ч',
                'C': 'С',
                'V': 'М',
                'B': 'И',
                'N': 'Т',
                'M': 'Ь',
                '{': 'Х',
                '}': 'Ї',
                ':': 'Ж',
                '"': 'Є',
                '<': 'Б',
                '>': 'Ю',
                '?': ','
            }
        },
        'ru-UA': {
            'en-US': {
                'й': 'q',
                'Й': 'Q',
                'ц': 'w',
                'Ц': 'W',
                'у': 'e',
                'У': 'E',
                'к': 'r',
                'К': 'R',
                'е': 't',
                'Е': 'T',
                'н': 'y',
                'Н': 'Y',
                'г': 'u',
                'Г': 'U',
                'ш': 'i',
                'Ш': 'I',
                'щ': 'o',
                'Щ': 'O',
                'з': 'p',
                'З': 'P',
                'х': '[',
                'Х': '[',
                'ъ': ']',
                'Ъ': ']',
                'ф': 'a',
                'Ф': 'A',
                'ы': 's',
                'Ы': 'S',
                'в': 'd',
                'В': 'D',
                'а': 'f',
                'А': 'F',
                'п': 'g',
                'П': 'G',
                'р': 'h',
                'Р': 'H',
                'о': 'j',
                'О': 'J',
                'л': 'k',
                'Л': 'K',
                'д': 'l',
                'Д': 'L',
                'ж': ';',
                'Ж': ';',
                'э': '\'',
                'Э': '\'',
                'я': 'z',
                'Я': 'Z',
                'ч': 'x',
                'Ч': 'X',
                'с': 'c',
                'С': 'C',
                'м': 'v',
                'М': 'V',
                'и': 'b',
                'И': 'B',
                'т': 'n',
                'Т': 'N',
                'ь': 'm',
                'Ь': 'M',
                'б': ',',
                'Б': ',',
                'ю': '.',
                'Ю': '.',
                'ё': '`',
                'Ё': '`',
                'і': 's',
                'І': 'S',
                'ї': ']',
                'Ї': ']',
                'є': '\'',
                'Є': '\''
            }
        }
    };

    module.exports = {

        /**
         * Возвращает конвертированное слово для тех,
         * кто забыл переключится с английской раскладки и ввел русское или украинское
         * Например:  привет --> ghbdtn
         *
         * @param {string} text собственно слово или набор слов
         * @param {string} from из какой раскладки
         * @param {string} to в какую раскладку
         */
        convert: function (text, from, to) {
            var current = symbolsRelations[from][to];
            for (var fromChar in current) {
                var toChar = current[fromChar],
                    regexp = new RegExp(fromChar, 'g');

                text = text.replace(regexp, toChar);
            }
            return text;
        }
    };
}());